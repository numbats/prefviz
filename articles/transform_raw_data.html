<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Transforming voting data to ternable-friendly format • prefviz</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transforming voting data to ternable-friendly format">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">prefviz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/draw_ternary_plot.html">Using `ternable` object to draw ternary plots</a></li>
    <li><a class="dropdown-item" href="../articles/transform_raw_data.html">Transforming voting data to ternable-friendly format</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/numbats/prefviz/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transforming voting data to ternable-friendly format</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/numbats/prefviz/blob/main/vignettes/transform_raw_data.Rmd" class="external-link"><code>vignettes/transform_raw_data.Rmd</code></a></small>
      <div class="d-none name"><code>transform_raw_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Raw voting data comes in all shapes and forms, and not all voting
data can be easily transformed into a format that is ready for ternary
plots.</p>
<p>This vignette shows how to transform common voting data formats into
a <code>ternable</code>-friendly format that can be used for ternary
plots. These include PrefLib-formatted data, raw ballot data in long and
wide forms, and AEC distribution of preference data.</p>
</div>
<div class="section level2">
<h2 id="ternable-friendly-data">
<code>ternable</code>-friendly data<a class="anchor" aria-label="anchor" href="#ternable-friendly-data"></a>
</h2>
<p><code><a href="../reference/ternable.html">ternable()</a></code> creates a <code>ternable</code> object, which
is a S3 object that contains the data and metadata necessary for ternary
plots.</p>
<p>A <code>ternable</code>-friendly data frame must have the following
characteristics:</p>
<ul>
<li>At least 3 numeric columns representing the preferences for 3
items/candidates of the election. These columns will act as the vertices
of the ternary plot.</li>
<li>Values in these item/candidate columns must be non-negative, and sum
to 1.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  electorate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>  PartyA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span>,</span>
<span>  PartyB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  PartyC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   electorate PartyA PartyB PartyC</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> A             0.5    0.3    0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> B             0.4    0.4    0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> C             0.6    0.2    0.2</span></span></code></pre></div>
<p>The above data frame is a minimal example of a
<code>ternable</code>-friendly data frame. It contains 3 columns, each
representing the preferences for a party in a specific electorate. The
values in these columns are all non-negative and sum to 1.</p>
</div>
<div class="section level2">
<h2 id="preflib-formatted-data">PrefLib-formatted data<a class="anchor" aria-label="anchor" href="#preflib-formatted-data"></a>
</h2>
<p><a href="https://preflib.github.io/PrefLib-Jekyll/format" class="external-link">PrefLib
format</a> is a common format for storing preferential data, and can be
easily downloaded using <code><a href="https://fleverest.github.io/prefio/reference/read_preflib.html" class="external-link">prefio::read_preflib()</a></code>
function.</p>
<p>In this example, we will use the <a href="https://preflib.github.io/PrefLib-Jekyll/dataset/00058" class="external-link">NSW
Legislative Assembly Election dataset</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nswla</span> <span class="op">&lt;-</span> <span class="fu">read_preflib</span><span class="op">(</span><span class="st">"00058 - nswla/00058-00000171.soi"</span>, from_preflib <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">nswla</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,104 × 2</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,094 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: preferences &lt;prefrncs&gt;, frequency &lt;int&gt;</span></span></span></code></pre></div>
<p>The dataset contains preferential data, with each row representing a
unique set of preferences and their respective frequencies. What is
missing to transform this data into a <code>ternable</code>-friendly
format is the breakdown of preferences for each candidate in each round
of voting.</p>
<p>The function <code><a href="../reference/dop_irv.html">dop_irv()</a></code> in this package helps us simulate
the Instant Runoff Voting (IRV) process to get the round-by-round
preferences for each candidate, and then transform the data into a
<code>ternable</code>-friendly format. A caveat for this function is
that it does not handle ties in preferences given a ballot, which works
fine under Australian IRV rules, but may not be appropriate for other
electoral systems.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dop_irv.html">dop_irv</a></span><span class="op">(</span></span>
<span>  <span class="va">nswla</span>, value_type <span class="op">=</span> <span class="st">"percentage"</span>,</span>
<span>  preferences_col <span class="op">=</span> <span class="va">preferences</span>,</span>
<span>  frequency_col <span class="op">=</span> <span class="va">frequency</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 8</span></span></span>
<span><span class="co">#&gt;   round `HAYLEN Jo` `WEI Leo` `RAUE Tom` `MAKRIS Andrea` `ROMANOVSKY Teresa`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1       0.464     0.233      0.206          0.057<span style="text-decoration: underline;">2</span>              0.025<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2       0.469     0.236      0.209          0.059<span style="text-decoration: underline;">5</span>              0.027<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3       0.478     0.240      0.218          0.064<span style="text-decoration: underline;">6</span>              0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4       0.504     0.253      0.244          0                   0     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: `SINDEN Dale` &lt;dbl&gt;, winner &lt;chr&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="raw-ballot-data-in-long-and-wide-formats">Raw ballot data in long and wide formats<a class="anchor" aria-label="anchor" href="#raw-ballot-data-in-long-and-wide-formats"></a>
</h2>
<p>Raw ballot data mostly comes in long or wide format. Both formats can
be transformed into Preflib format, which can then be converted to
<code>ternable</code>-friendly format using <code><a href="../reference/dop_irv.html">dop_irv()</a></code>.</p>
<p><strong>Processing long format</strong></p>
<p>Consider the following example of simulated ballot data in long
format for the Melbourne electorate, with 3 parties: ALP, LNP, and
Other, and a typical column for preference rank.</p>
<table class="table">
<thead><tr class="header">
<th align="right">ballot_id</th>
<th align="left">elect_division</th>
<th align="left">party</th>
<th align="right">preference_rank</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Melbourne</td>
<td align="left">ALP</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Melbourne</td>
<td align="left">LNP</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">Melbourne</td>
<td align="left">Other</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Melbourne</td>
<td align="left">ALP</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Melbourne</td>
<td align="left">LNP</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Melbourne</td>
<td align="left">Other</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Melbourne</td>
<td align="left">ALP</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Melbourne</td>
<td align="left">LNP</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Melbourne</td>
<td align="left">Other</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Melbourne</td>
<td align="left">ALP</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">Melbourne</td>
<td align="left">LNP</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Melbourne</td>
<td align="left">Other</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Melbourne</td>
<td align="left">ALP</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Melbourne</td>
<td align="left">LNP</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Melbourne</td>
<td align="left">Other</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert to PrefLib format</span></span>
<span><span class="va">preflib_long</span> <span class="op">&lt;-</span> <span class="fu">prefio</span><span class="fu">::</span><span class="fu"><a href="https://fleverest.github.io/prefio/reference/preferences.html" class="external-link">long_preferences</a></span><span class="op">(</span></span>
<span>  <span class="va">ballot_long</span>,</span>
<span>  <span class="va">vote</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ballot_id</span>, <span class="va">elect_division</span><span class="op">)</span>,</span>
<span>  item_col <span class="op">=</span> <span class="va">party</span>,</span>
<span>  rank_col <span class="op">=</span> <span class="va">preference_rank</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to ternable-friendly format</span></span>
<span><span class="fu"><a href="../reference/dop_irv.html">dop_irv</a></span><span class="op">(</span><span class="va">preflib_long</span><span class="op">$</span><span class="va">vote</span>, value_type <span class="op">=</span> <span class="st">"percentage"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   round   ALP   LNP Other winner</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1   0.4   0.2   0.4 ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2   0.6   0     0.4 ALP</span></span></code></pre></div>
<p><strong>Processing wide format</strong></p>
<p>Consider the same example, but in wide format, with each column
representing an item/candidate and its value representing the preference
rank.</p>
<table class="table">
<thead><tr class="header">
<th align="right">ballot_id</th>
<th align="left">elect_division</th>
<th align="right">ALP</th>
<th align="right">LNP</th>
<th align="right">Other</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Melbourne</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Melbourne</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Melbourne</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Melbourne</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Melbourne</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert to PrefLib format</span></span>
<span><span class="va">preflib_wide</span> <span class="op">&lt;-</span> <span class="fu">prefio</span><span class="fu">::</span><span class="fu"><a href="https://fleverest.github.io/prefio/reference/preferences.html" class="external-link">wide_preferences</a></span><span class="op">(</span><span class="va">ballot_wide</span>, <span class="va">vote</span>, <span class="va">ALP</span><span class="op">:</span><span class="va">Other</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to ternable-friendly format</span></span>
<span><span class="fu"><a href="../reference/dop_irv.html">dop_irv</a></span><span class="op">(</span><span class="va">preflib_wide</span><span class="op">$</span><span class="va">vote</span>, value_type <span class="op">=</span> <span class="st">"percentage"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   round   ALP   LNP Other winner</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1   0.4   0.2   0.4 ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2   0.6   0     0.4 ALP</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="aec-distribution-of-preferences">AEC distribution of preferences<a class="anchor" aria-label="anchor" href="#aec-distribution-of-preferences"></a>
</h2>
<p>This section applies specifically to the <a href="https://results.aec.gov.au/31496/Website/Downloads/HouseDopByDivisionDownload-31496.csv" class="external-link">AEC
distribution of preferences</a> data. However, it can also be adapted to
datasets of similar format, where</p>
<ul>
<li>Each row represents an aggregated preference count and/or percentage
for a specific candidate in a specific group/electorate.</li>
<li>There must be at least a primary key column that uniquely identifies
each row, a value column representing the preference count/percentage,
and an item column representing the items/parties.</li>
<li>There may also be a column representing the electoral status of the
item/party (elected or not elected). This is optional.</li>
</ul>
<p>In this example, we will work with 2025 Distribution of Preference
data, which is included in this package as <code>aecdop_2025</code>. We
are interested in preference percentages of 4 main parties: Labor, The
Coalition, Greens, and Independents. The rest is grouped into Other.</p>
<p>Before transforming the data, let’s do some data wrangling to filter
for relevant information.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># only include preference percentage and parties of interest</span></span>
<span></span>
<span><span class="va">aecdop_2025</span> <span class="op">&lt;-</span> <span class="va">aecdop_2025</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">CalculationType</span> <span class="op">==</span> <span class="st">"Preference Percent"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Party <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="co"># all parties not in the main parties are grouped into "Other"</span></span>
<span>    <span class="op">!</span><span class="op">(</span><span class="va">PartyAb</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LP"</span>, <span class="st">"ALP"</span>, <span class="st">"NP"</span>, <span class="st">"LNP"</span>, <span class="st">"LNQ"</span>, <span class="st">"GRN"</span>, <span class="st">"IND"</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Other"</span>, </span>
<span>    <span class="co"># group all parties in the Coalition into "LNP"</span></span>
<span>    <span class="va">PartyAb</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LP"</span>, <span class="st">"NP"</span>, <span class="st">"LNP"</span>, <span class="st">"LNQ"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"LNP"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">PartyAb</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The data is now ready for transformation, with the following
characteristics:</p>
<ul>
<li>
<code>DivisionNm</code> and <code>CountNumber</code> columns
together form the primary key that uniquely identifies each row.</li>
<li>
<code>CalculationValue</code> column contains the preference
percentage.</li>
<li>
<code>Party</code> column contains the item/party.</li>
<li>
<code>Elected</code> column contains the elected/electoral status of
the party.</li>
</ul>
<p>We will use the <code><a href="../reference/dop_transform.html">dop_transform()</a></code> function to transform
the data into a <code>ternable</code>-friendly format.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dop_transform.html">dop_transform</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">aecdop_2025</span>,</span>
<span>  key_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">DivisionNm</span>, <span class="va">CountNumber</span><span class="op">)</span>,</span>
<span>  value_col <span class="op">=</span> <span class="va">CalculationValue</span>,</span>
<span>  item_col <span class="op">=</span> <span class="va">Party</span>,</span>
<span>  winner_col <span class="op">=</span> <span class="va">Elected</span>,</span>
<span>  winner_identifier <span class="op">=</span> <span class="st">"Y"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 976 × 8</span></span></span>
<span><span class="co">#&gt;    DivisionNm CountNumber   ALP   GRN   LNP  Other    IND Winner</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Adelaide             0 0.465 0.190 0.242 0.104  0      ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Adelaide             1 0.467 0.194 0.242 0.096<span style="text-decoration: underline;">7</span> 0      ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Adelaide             2 0.476 0.205 0.244 0.074<span style="text-decoration: underline;">5</span> 0      ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Adelaide             3 0.483 0.210 0.249 0.057<span style="text-decoration: underline;">8</span> 0      ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Adelaide             4 0.493 0.222 0.285 0      0      ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Adelaide             5 0.691 0     0.309 0      0      ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Aston                0 0.373 0     0.377 0.209  0.041<span style="text-decoration: underline;">4</span> ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Aston                1 0.373 0     0.378 0.206  0.043<span style="text-decoration: underline;">4</span> ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Aston                2 0.376 0     0.380 0.210  0.033<span style="text-decoration: underline;">8</span> ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Aston                3 0.378 0     0.384 0.202  0.035<span style="text-decoration: underline;">8</span> ALP   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 966 more rows</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/linhngo66" class="external-link">Linh Ngo</a>, <a href="https://github.com/dicook" class="external-link">Dianne Cook</a>, <a href="https://damjan.vukcevic.net/" class="external-link">Damjan Dvukcevic</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
