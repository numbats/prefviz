% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/input_wrapper.R
\name{dop_irv}
\alias{dop_irv}
\title{Get full distribution of preferences in each instant runoff voting round as percentage}
\usage{
dop_irv(x, value_type = c("percentage", "count"), ...)
}
\arguments{
\item{x}{Input data. Accepts the same formats as \code{prefio::pref_irv()}:
\itemize{
\item A preference vector where each element represents one ballot
\item A data frame with a column for preference
}}

\item{value_type}{Character string specifying the output format. Either:
\itemize{
\item \code{"percentage"} (default): Returns vote shares as proportions (0-1)
\item \code{"count"}: Returns raw vote counts
}}

\item{...}{Additional arguments passed to \code{prefio::pref_irv()}, including:
\itemize{
\item \code{preferences_col}: Column name containing preference orderings
\item \code{frequency_col}: Column name containing vote frequencies
}}
}
\value{
A tibble with the following structure:
\itemize{
\item \code{round}: Integer, the round number (1 to n)
\item One column per candidate: Numeric, the percentage of votes (0-1) that
candidate received in that round. NA values are replaced with 0 for
eliminated candidates.
\item \code{winner}: Character, the name of the eventual IRV winner (same for all rows)
}
}
\description{
Compute the preference in each round of instant runoff voting from input data,
transforming the results into a tidy format for visualization. Each row represents
one round, with columns for each candidate's preference percentage and the election winner.
}
\examples{
# Example 1: From preference vector
votes <- c("A > B > C", "B > A > C", "C > B > A", "A > B > C")
percent_df <- dop_irv(votes, value_type = "count")

# Example 2: From data frame with custom column names
vote_data <- tibble(
  prefs = c("A > B > C", "B > C > A", "C > A > B"),
  counts = c(100, 75, 25)
)
percent_df <- dop_irv(vote_data, value_type = "percentage",
                      preferences_col = prefs,
                      frequency_col = counts)

}
